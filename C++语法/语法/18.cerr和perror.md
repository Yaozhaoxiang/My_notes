## 18. `cerr`和`perror`
1. cerr
std::cerr 是 C++ 标准库中的一个流对象，用于输出错误消息。它是标准输出流 std::cout 的兄弟，主要用于输出错误信息、警告或调试信息。std::cerr 默认是不带缓冲的，这意味着它会立即将错误消息输出到屏幕，这在调试时非常有用。

特点和使用场景
  1. 无缓冲：
    +  std::cerr 是无缓冲的流，这意味着它的输出会被立即显示在终端，而不进行缓冲。对于错误和警告信息，这是一个很有用的特性，因为它确保信息能快速呈现给用户。
  2. 流操作：
    + std::cerr 支持流操作符（如 <<），可以用来格式化错误消息和调试信息。
  3. 与 std::cout 区别：
    + std::cout 是带缓冲的输出流，这意味着它的输出可能会在缓存中暂时保留，直到缓存被刷新。相比之下，std::cerr 的输出直接写入标准错误流并立即显示，适合用于输出错误和警告信息。
  4. 多线程环境：
    + 在多线程程序中，std::cerr 的无缓冲特性确保错误消息能够及时且准确地显示，但也需要注意线程安全，确保消息输出不会互相干扰。

2. perror
类型：perror 是一个 C 标准库函数，定义在 <stdio.h> 头文件中。

功能：用于输出基于当前 errno 变量的系统错误信息。errno 是一个全局变量，用于存储系统调用或库函数出错时的错误码。

用法：perror 将 errno 的值转换为错误描述字符串，并将该字符串输出到标准错误流。它通常用于显示与系统调用错误相关的标准错误信息。

```cpp
#include <iostream>
#include <cerrno>
#include <cstring> // for strerror

int main() {
    // 使故意出错
    FILE* file = fopen("nonexistent_file.txt", "r");
    if (file == nullptr) {
        perror("Error opening file");
    }
    return 0;
}
```
在这个示例中，如果 fopen 失败，perror 会输出类似“Error opening file: No such file or directory”的错误信息，其中“No such file or directory”部分是基于 errno 的描述。

1. 输出内容：
  std::cerr：用于输出自定义的错误信息或调试信息，输出内容可以完全由用户控制。
  perror：专门用于输出与 errno 相关的系统错误信息，错误信息是系统生成的，基于最近的系统调用或库函数的错误码。

2. 使用场景：
  std::cerr：适用于需要输出详细错误信息和调试信息的场景，可以结合其他信息进行格式化输出。
  perror：适用于显示系统调用或库函数的错误信息，特别是在发生系统级错误时。

3. 格式化：
  std::cerr：支持使用流操作符进行自定义格式化。
  perror：只显示系统错误消息，不支持自定义格式化。

实践中的选择
  当你需要展示与系统调用或库函数相关的错误信息时，perror 是一个方便的选择，因为它自动处理错误码和错误消息的映射。
  当你需要输出其他类型的错误信息或调试信息时，std::cerr 提供了更大的灵活性和控制能力。


