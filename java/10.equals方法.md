# equals æ–¹æ³•

+ 1. equals() æ˜¯ä»€ä¹ˆï¼Ÿ
+ 2. é»˜è®¤çš„ equals() è¡Œä¸º
+ 3. é‡å†™ equals() â€”â€” æ¯”è¾ƒâ€œå€¼ç›¸ç­‰â€
+ 4. é‡å†™ equals() çš„è§„èŒƒ
+ 5. ä¸ºä»€ä¹ˆè¦é‡å†™ equals()
+ 6. å’Œ hashCode() æœ‰å•¥å…³ç³»ï¼Ÿ
+ 7. å’Œ == çš„åŒºåˆ«ï¼Ÿ
+ 8ã€ä»€ä¹ˆæ—¶å€™å¿…é¡»é‡å†™ equals()ï¼Ÿ

## ğŸŒŸ 1. equals() æ˜¯ä»€ä¹ˆï¼Ÿ

å®ƒæ˜¯ Java ä¸­æ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿è‡ª Object ç±»çš„æ–¹æ³•ï¼Œç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡ â€œæ˜¯å¦ç›¸ç­‰â€ã€‚

```java
public boolean equals(Object obj) {
    return (this == obj);
}
```

é»˜è®¤å®ç°æ˜¯ï¼šæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¼•ç”¨ï¼ˆåœ°å€ï¼‰ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼äº C++ ä¸­çš„ == æ¯”è¾ƒæŒ‡é’ˆã€‚

## ğŸ” 2. é»˜è®¤çš„ equals() è¡Œä¸º

```java
Object a = new Object();
Object b = new Object();
System.out.println(a.equals(b)); // falseï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡
```

ç­‰ä»·äºï¼š

```java
a == b // æ¯”è¾ƒçš„æ˜¯åœ°å€
```

## âœ… 3. é‡å†™ equals() â€”â€” æ¯”è¾ƒâ€œå€¼ç›¸ç­‰â€

å¦‚æœä½ æƒ³è®©ä¸¤ä¸ªä¸åŒå¯¹è±¡å†…å®¹ç›¸ç­‰æ—¶ä¹Ÿè¿”å› trueï¼Œä½ å°±å¾—è‡ªå·±é‡å†™ equals()ã€‚

ğŸŒ° ä¸¾ä¸ªä¾‹å­ï¼šå®šä¹‰ä¸€ä¸ª Person ç±»

```java
public class Person {
    String name;
    int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // é‡å†™ equals
    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true; // å¼•ç”¨ç›¸åŒ
        if (obj == null || getClass() != obj.getClass()) return false; // ç±»å‹ä¸ä¸€æ ·
        Person other = (Person) obj; // å¼ºè½¬ç±»å‹
        return this.age == other.age && this.name.equals(other.name); // æ¯”è¾ƒå†…å®¹
    }
}

```

ç„¶åä½ å°±å¯ä»¥è¿™æ ·ç”¨äº†ï¼š

```java
Person p1 = new Person("Tom", 18);
Person p2 = new Person("Tom", 18);
System.out.println(p1.equals(p2)); // true
```

## ğŸ” 4. é‡å†™ equals() çš„è§„èŒƒï¼ˆJava å®˜æ–¹æ¨èï¼‰
å½“ä½ é‡å†™ equals() æ—¶ï¼Œåº”è¯¥éµå¾ªè¿™äº”æ¡åŸåˆ™ï¼ˆå¾ˆåƒæ•°å­¦é‡Œçš„â€œç›¸ç­‰å…³ç³»â€ï¼‰ï¼š

æ€§è´¨ | è§£é‡Š
è‡ªåæ€§ | x.equals(x) å¿…é¡»ä¸º true
å¯¹ç§°æ€§ | x.equals(y) == y.equals(x)
ä¼ é€’æ€§ | å¦‚æœ x.equals(y) ä¸” y.equals(z)ï¼Œåˆ™ x.equals(z)
ä¸€è‡´æ€§ | å¤šæ¬¡è°ƒç”¨è¿”å›å€¼åº”ä¸€è‡´ï¼ˆå¦‚æœå¯¹è±¡æ²¡æ”¹å˜ï¼‰
ä¸ null æ¯”è¾ƒ | x.equals(null) å¿…é¡»è¿”å› falseï¼Œä¸æŠ›å¼‚å¸¸

## ğŸ§  5. ä¸ºä»€ä¹ˆè¦é‡å†™ equals()ï¼Ÿ
âœ… å½“ä½ ä½¿ç”¨é›†åˆæ—¶éå¸¸é‡è¦ï¼

```java
Set<Person> set = new HashSet<>();
set.add(new Person("Tom", 18));
System.out.println(set.contains(new Person("Tom", 18))); // false âŒ å¦‚æœæ²¡é‡å†™ equals
```

å¦‚æœä½ æ²¡æœ‰é‡å†™ equals()ï¼ŒHashSetã€HashMap ç”šè‡³ ArrayList.contains() éƒ½ä¼šåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡â€œä¸ç›¸ç­‰â€ã€‚

## ğŸ” 6. å’Œ hashCode() æœ‰å•¥å…³ç³»ï¼Ÿ
å¦‚æœä½  é‡å†™äº† equals()ï¼Œå°±å¿…é¡»åŒæ—¶é‡å†™ hashCode()ï¼Œå¦åˆ™åœ¨ HashMapã€HashSet è¿™ç±»é›†åˆé‡Œä¼šå‡ºé—®é¢˜ã€‚

```java
@Override
public int hashCode() {
    return Objects.hash(name, age);
}
```

Java çš„çº¦å®šæ˜¯ï¼š

> ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼ˆequals == trueï¼‰ï¼Œå®ƒä»¬çš„ hashCode ä¹Ÿå¿…é¡»ç›¸ç­‰ã€‚


## ğŸ” 7. å’Œ == çš„åŒºåˆ«ï¼Ÿ

æ¯”è¾ƒæ–¹å¼ | æ„ä¹‰
== | æ¯”è¾ƒçš„æ˜¯ åœ°å€ï¼ˆæ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰
equals() | æ¯”è¾ƒçš„æ˜¯ å€¼ï¼ˆé™¤éæ²¡é‡å†™ï¼‰

ğŸ”§ 8. ä½¿ç”¨ Objects.equals() æ›´å®‰å…¨


```java
Objects.equals(str1, str2);
```
âœ… è‡ªåŠ¨å¤„ç† nullï¼Œæ¯”å¦‚ï¼š

```java
String s1 = null;
String s2 = "abc";
System.out.println(Objects.equals(s1, s2)); // falseï¼Œä¸æŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸
```

ğŸ“Œ æ€»ç»“ä¸€å¼ å›¾ï¼ˆæ–‡å­—ç‰ˆï¼‰

```js
Objectç±»
  |
  --> equals(Object obj)
        â†“
  é»˜è®¤æ¯”è¾ƒåœ°å€  => å’Œ ==
  æƒ³æ¯”è¾ƒå†…å®¹  => å¿…é¡»é‡å†™
        â†“
  é‡å†™æ—¶è®°å¾—ï¼š
    - æ£€æŸ¥å¼•ç”¨æ˜¯å¦ç›¸åŒ
    - ç±»å‹åˆ¤æ–­ï¼ˆinstanceof æˆ– getClassï¼‰
    - å¼ºåˆ¶ç±»å‹è½¬æ¢
    - æ¯”è¾ƒæ¯ä¸ªå­—æ®µ
  åŒæ—¶é‡å†™ hashCode()

```

## ğŸ” 8ã€ä»€ä¹ˆæ—¶å€™å¿…é¡»é‡å†™ equals()ï¼Ÿ

âœ… 1. ä½ è¦å°†å¯¹è±¡æ”¾è¿›é›†åˆä¸­è¿›è¡ŒæŸ¥æ‰¾/å»é‡
æ¯”å¦‚ï¼š

Setï¼ˆå¦‚ HashSet, TreeSetï¼‰

Map çš„ keyï¼ˆå¦‚ HashMap, HashTableï¼‰

List.contains(Object)ã€remove(Object)ã€indexOf(Object) ç­‰æ–¹æ³•

è¿™äº›é›†åˆåº•å±‚éƒ½æ˜¯é€šè¿‡ equals() æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦â€œç›¸ç­‰â€çš„ï¼

ğŸ” equals å’Œ hashCode è¦ä¸€èµ·é‡å†™ï¼
å¦‚æœä½ é‡å†™äº† equals()ï¼Œé‚£ä¹ˆï¼š

å¿…é¡»é‡å†™ hashCode()ï¼å¦åˆ™åƒ HashMapã€HashSet è¿™ç±»é›†åˆä¼šå·¥ä½œå¼‚å¸¸ï¼




