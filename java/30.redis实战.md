# redis

## 1. jedis

### 1.1 jedis çš„ä½¿ç”¨

1. å¼•å…¥ä¾èµ–

```java
<dependency>
    <groupId>redis.clients</groupId>
    <artifactId>jedis</artifactId>
    <version>4.4.3</version>
</dependency>
```

2. å»ºç«‹è¿æ¥

```java
@BeforeEach
void setUp() {
    // è¿æ¥æœ¬åœ° Redisï¼Œé»˜è®¤ç«¯å£ 6379
    jedis = new Jedis("123.60.131.127", 6379);
    // å¦‚æœæœ‰å¯†ç ï¼Œç”¨
    jedis.auth("20010111");
    //jedis.flushDB(); // æ¸…ç©ºå½“å‰æ•°æ®åº“ï¼Œä¿è¯æµ‹è¯•å¹²å‡€
    jedis.select(0);
}
```

3. æµ‹è¯•

```java
@Test
void testSetAndGet() {
    jedis.set("testKey", "hello");
    String value = jedis.get("testKey");
    assertEquals("hello", value);
}
```

4. é‡Šæ”¾èµ„æº

```java
@AfterEach
void tearDown() {
    if (jedis != null) {
        jedis.close();
    }
}
```

ğŸ“Œ å…³é”®ç‚¹è®²è§£

âœ… @BeforeEachï¼šæ¯ä¸ªæµ‹è¯•æ–¹æ³•å‰æ‰§è¡Œï¼Œç”¨æ¥åˆå§‹åŒ–è¿æ¥ã€‚

âœ… @AfterEachï¼šæ¯ä¸ªæµ‹è¯•æ–¹æ³•åæ‰§è¡Œï¼Œå…³é—­è¿æ¥ã€‚

âœ… æ–­è¨€ï¼šç”¨ assertEquals æ£€æŸ¥å®é™…å€¼å’ŒæœŸæœ›å€¼ã€‚


### 1.2 jedis è¿æ¥æ± 

Jedisæœ¬èº«æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯è¿æ¥ä¼šæœ‰æ€§èƒ½æŸè€—ï¼Œå› æ­¤ä½¿ç”¨Jedisè¿æ¥æ± ä»£æ›¿Jedisçš„ç›´è¿æ–¹å¼

ğŸ“Š æ± å‚æ•°è§£é‡Š

| å‚æ•°              | ä½œç”¨                     |
| --------------- | ---------------------- |
| `maxTotal`      | æœ€å¤§è¿æ¥æ•°ï¼ˆæ€»å…±å…è®¸å¤šå°‘ Jedis å®ä¾‹ï¼‰ |
| `maxIdle`       | æœ€å¤§ç©ºé—²è¿æ¥æ•°ï¼ˆæ± é‡Œæœ€å¤šç•™å¤šå°‘ä¸ç”¨çš„è¿æ¥ï¼‰  |
| `minIdle`       | æœ€å°ç©ºé—²è¿æ¥æ•°ï¼ˆæ± é‡Œè‡³å°‘ä¿è¯å¤šå°‘è¿æ¥å¤‡ç”¨ï¼‰  |
| `maxWaitMillis` | è·å–è¿æ¥æ—¶æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œè¶…æ—¶æŠ›å¼‚å¸¸      |
| `testOnBorrow`  | ä»æ± é‡Œå–è¿æ¥æ—¶ï¼Œæ˜¯å¦æ£€æŸ¥å¯ç”¨æ€§        |
| `testOnReturn`  | å½’è¿˜è¿æ¥æ—¶ï¼Œæ˜¯å¦æ£€æŸ¥å¯ç”¨æ€§          |


```java
public class JedisConnectionFactory {
    private static final JedisPool jedisPool;

    static {
        JedisPoolConfig config = new JedisPoolConfig();
        config.setMaxIdle(10);
        config.setMaxTotal(10);
        config.setMinIdle(4);
        config.setMaxWaitMillis(5000);

        jedisPool = new JedisPool(config, "123.60.131.127", 6379,
                1000, "20010111");
    }

    public static Jedis getJedis() {
        return jedisPool.getResource();
    }
}
```

ğŸ“¦ ä»£ç æ•´ä½“ä½œç”¨

å®ƒçš„ä¸»è¦ç›®çš„æ˜¯ï¼š

âœ… ç¨‹åºå¯åŠ¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ JedisPoolï¼ˆè¿æ¥æ± ï¼‰

âœ… æä¾› getJedis() é™æ€æ–¹æ³•ï¼Œå…¶ä»–ä»£ç éšæ—¶èƒ½è·å–ä¸€ä¸ª Jedis è¿æ¥

è¿™ç§å†™æ³•å¯ä»¥å‡å°‘åˆ°å¤„é‡å¤ new JedisPoolï¼Œæé«˜æ€§èƒ½ã€‚

### 1.3 SpringDataRedis
























