![](./å›¾ç‰‡/å•åˆ—é›†åˆ.png)

listé›†åˆï¼šæ·»åŠ å…ƒç´ æ˜¯æœ‰åºã€å¯é‡å¤ã€æœ‰ç´¢å¼•

seté›†åˆï¼šæ— åºã€ä¸é‡å¤ã€æ— ç´¢å¼•

ä¸€. Collection
    1. éå†
        1.1 è¿­ä»£å™¨éå†
        1.2 å¢å¼ºforéå†
        1.3 lambdaéå†

# ä¸€. Collection
## 1. éå†
### 1.1. è¿­ä»£å™¨éå†

ä½¿ç”¨ Iterator éå†
Iterator ä»…æ”¯æŒåœ¨éå†è¿‡ç¨‹ä¸­åˆ é™¤å…ƒç´ ï¼Œè€Œä¸æ”¯æŒä¿®æ”¹å…ƒç´ çš„å€¼ã€‚è¦æ˜¯å°è¯•åœ¨ Iterator éå†æœŸé—´ä¿®æ”¹å…ƒç´ ï¼Œä»£ç ä¼šæŠ¥é”™ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼š

```java
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class IteratorExample {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("apple");
        list.add("banana");
        list.add("cherry");

        Iterator<String> iterator = list.iterator();
        while (iterator.hasNext()) {
            String element = iterator.next();
            // ä»¥ä¸‹ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º Iterator ä¸æ”¯æŒä¿®æ”¹å…ƒç´ 
            // element = "new value"; 
            iterator.remove(); // æ”¯æŒåˆ é™¤å…ƒç´ 
        }
        System.out.println(list);
    }
}
```

ListIterator æ˜¯ Iterator çš„å­æ¥å£ï¼Œå®ƒæä¾›äº†åŒå‘éå†çš„åŠŸèƒ½ï¼ŒåŒæ—¶æ”¯æŒåœ¨éå†è¿‡ç¨‹ä¸­ä¿®æ”¹å…ƒç´ çš„å€¼ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ ListIterator ä¿®æ”¹å…ƒç´ å€¼çš„ç¤ºä¾‹ä»£ç ï¼š

```java
import java.util.ArrayList;
import java.util.List;
import java.util.ListIterator;

public class ListIteratorExample {
    public static void main(String[] args) {
        List<String> list = new ArrayList<>();
        list.add("apple");
        list.add("banana");
        list.add("cherry");

        ListIterator<String> listIterator = list.listIterator();
        while (listIterator.hasNext()) {
            String element = listIterator.next();
            if ("banana".equals(element)) {
                listIterator.set("new banana"); // ä¿®æ”¹å…ƒç´ çš„å€¼
            }
        }
        System.out.println(list);
    }
}    
```

Collection: å®ç°äº†Iterator
Listï¼šå®ç°ListIterator

æ³¨æ„ï¼šåœ¨ä½¿ç”¨Ieteratoræ—¶ï¼Œä¸èƒ½ä½¿ç”¨è‡ªèº«çš„ remove æ–¹æ³•æ¥åˆ é™¤å…ƒç´ 
ä¸‹é¢æ˜¯é”™è¯¯çš„ï¼š
```java
        ArrayList<String> a = new ArrayList<>();
        a.add("a");
        a.add("b");
        a.add("c");
        a.add("d");
        a.set(1,"adsf");
        Iterator<String> it = a.iterator();
        while (it.hasNext()) {
            String s = it.next();
            if(s.equals("a")){
                a.remove(s);
            }
        }
```

å¼‚å¸¸äº§ç”Ÿçš„åŸç†
+ è¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥æœºåˆ¶ï¼šIterator æ˜¯ Java é›†åˆæ¡†æ¶ä¸­ç”¨äºéå†é›†åˆå…ƒç´ çš„å·¥å…·ï¼Œå®ƒæœ‰ä¸€ä¸ªå¿«é€Ÿå¤±è´¥ï¼ˆfail - fastï¼‰æœºåˆ¶ã€‚å½“åˆ›å»ºä¸€ä¸ª Iterator æ—¶ï¼Œå®ƒä¼šè®°å½•é›†åˆçš„åˆå§‹çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€é€šå¸¸é€šè¿‡ä¸€ä¸ªå†…éƒ¨çš„è®¡æ•°å™¨ï¼ˆå¦‚ modCountï¼‰æ¥è¡¨ç¤ºï¼Œè¯¥è®¡æ•°å™¨è®°å½•äº†é›†åˆç»“æ„è¢«ä¿®æ”¹çš„æ¬¡æ•°ã€‚

+ ç»“æ„ä¿®æ”¹çš„å®šä¹‰ï¼šåœ¨ ArrayList ä¸­ï¼Œè°ƒç”¨ addã€remove ç­‰æ–¹æ³•ä¼šæ”¹å˜é›†åˆçš„ç»“æ„ï¼Œæ­¤æ—¶ modCount ä¼šå¢åŠ ã€‚è€Œ Iterator åœ¨æ¯æ¬¡è°ƒç”¨ hasNext() æˆ– next() æ–¹æ³•æ—¶ï¼Œä¼šæ£€æŸ¥å½“å‰é›†åˆçš„ modCount æ˜¯å¦ä¸åˆ›å»º Iterator æ—¶è®°å½•çš„çŠ¶æ€ä¸€è‡´ã€‚

+ å¼‚å¸¸è§¦å‘ï¼šåœ¨ä½ çš„ä»£ç é‡Œï¼Œå½“æ‰§è¡Œ a.remove(s) æ—¶ï¼ŒArrayList çš„ç»“æ„è¢«ä¿®æ”¹ï¼ŒmodCount ä¼šå¢åŠ ã€‚ä½† Iterator å†…éƒ¨è®°å½•çš„çŠ¶æ€å¹¶æœªæ›´æ–°ï¼Œå½“ Iterator ä¸‹ä¸€æ¬¡è°ƒç”¨ hasNext() æˆ– next() æ–¹æ³•æ—¶ï¼Œä¼šå‘ç° modCount ä¸è®°å½•çš„çŠ¶æ€ä¸ä¸€è‡´ï¼Œå°±ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ï¼Œä»¥æ­¤æ¥æç¤ºå¼€å‘è€…é›†åˆåœ¨è¿­ä»£è¿‡ç¨‹ä¸­è¢«éæ³•ä¿®æ”¹äº†ã€‚


### 1.2 å¢å¼ºforéå†

+ å¢å¼ºforçš„åº•å±‚å°±æ˜¯è¿­ä»£å™¨ï¼Œä¸ºäº†ç®€åŒ–è¿­ä»£å™¨çš„ä»£ç ä¹¦å†™
+ å†…éƒ¨åŸç† Iteratorè¿­ä»£å™¨
+ æ‰€æœ‰çš„å•åˆ—é›†åˆå’Œæ•°ç»„æ‰èƒ½ç”¨å¢å¼ºforéå†

Java çš„ for-each æ˜¯ æŒ‰å€¼å¤åˆ¶å¼•ç”¨ï¼Œä¸æ˜¯å¼•ç”¨ä¼ é€’

```java
for (String s : list) {
    System.out.println(s);
}
```

ç›¸å½“äºç¼–è¯‘å™¨ä¼šâ€œç¿»è¯‘â€æˆä¸‹é¢è¿™æ ·çš„å½¢å¼ï¼ˆå‡è®¾æ˜¯é›†åˆç±»å‹ï¼‰ï¼š

```java
Iterator<String> it = list.iterator();
while (it.hasNext()) {
    String s = it.next();
    System.out.println(s);
}
```

æ‰€ä»¥è¯´ä¿®æ”¹å¢å¼ºforä¸­çš„å˜é‡ï¼Œä¸ä¼šæ”¹å˜é›†åˆä¸­åŸæœ¬çš„æ•°æ®

ğŸ” ä¸‰ã€ä¸ºä»€ä¹ˆæ•°ç»„ä¹Ÿèƒ½å¢å¼º forï¼Ÿ
Java ç¼–è¯‘å™¨å¯¹æ•°ç»„æ˜¯ç‰¹æ®Šå¤„ç†çš„ï¼Œå®ƒä¼šç›´æ¥å˜æˆä¸‹æ ‡è®¿é—®ï¼š

```java
for (int num : arr)
```

```java
for (int i = 0; i < arr.length; i++) {
    int num = arr[i];
    ...
}
```

ğŸ§© å››ã€æ¥å£æ”¯æŒï¼šIterable æ¥å£
å‡¡æ˜¯æƒ³è¢«å¢å¼º for ä½¿ç”¨çš„â€œé›†åˆç±»â€ï¼Œå¿…é¡»å®ç°æ¥å£ï¼š

```java
public interface Iterable<T> {
    Iterator<T> iterator();
}
```

ğŸ” æ‹“å±•ä¸€ä¸‹ï¼šè‡ªå·±å†™ä¸ªç±»æ”¯æŒå¢å¼º forï¼Ÿ
åªéœ€è¦å®ç° Iterable<T>ï¼Œæ¯”å¦‚ä½ å†™ä¸€ä¸ªç±»ï¼š
```java
class MyCollection implements Iterable<String> {
    private String[] data = {"a", "b", "c"};

    @Override
    public Iterator<String> iterator() {
        return Arrays.asList(data).iterator(); // ç”¨ List çš„è¿­ä»£å™¨
    }
}
```

ç°åœ¨ä½ å°±å¯ä»¥å¢å¼º forï¼š
```java
for (String s : new MyCollection()) {
    System.out.println(s);
}
```

### 1.3 lambdaéå†

```java
        Collection<String> a = new ArrayList<>();
        a.add("a");
        a.add("b");
        a.add("c");
        a.add("d");

        a.forEach(new Consumer<String>() {
            @Override
            public void accept(String s) {
                System.out.println(s);
            }
        });

        a.forEach (s -> System.out.println(s));
```
## æ€»ç»“

1. Collectionæ˜¯é¡¶å±‚æ¥å£ï¼Œæ‰€æœ‰æ–¹æ³•è¢«Listå’ŒSeté›†åˆå…¬ç”¨
2. å¸¸è§æ–¹æ³•ï¼š

add
clear
remove
contains
isEmpty
size

3. é€šç”¨éå†æ–¹æ³•
+ è¿­ä»£å™¨ï¼š åœ¨éå†çš„è¿‡ç¨‹ä¸­éœ€è¦åˆ é™¤å…ƒç´ ï¼Œä½¿ç”¨è¿­ä»£å™¨
+ å¢å¼ºfor Lambda:ä»…ä»…éå†

# äºŒ. list

List æ˜¯ Java é›†åˆæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿è‡ª Collectionï¼Œè¡¨ç¤ºä¸€ä¸ªæœ‰åºã€å¯é‡å¤çš„å…ƒç´ é›†åˆã€‚


## 2. ArrayList çš„ç®€å•å®ç°

å®ç°ç±»ï¼Œ æ•°ç»„ï¼Œ éšæœºè®¿é—®ï¼Œ æ²¡æœ‰åŒæ­¥ï¼Œ çº¿ç¨‹ä¸å®‰å…¨

```cpp
import java.util.Arrays;

// è‡ªå®šä¹‰çš„ ArrayList ç±»
class MyArrayList<E> {
    // é»˜è®¤åˆå§‹å®¹é‡
    private static final int DEFAULT_CAPACITY = 10;
    // å­˜å‚¨å…ƒç´ çš„æ•°ç»„
    private Object[] elementData;
    // å½“å‰å…ƒç´ æ•°é‡
    private int size;

    // æ— å‚æ„é€ å‡½æ•°ï¼Œä½¿ç”¨é»˜è®¤å®¹é‡
    public MyArrayList() {
        this.elementData = new Object[DEFAULT_CAPACITY];
    }

    // æŒ‡å®šåˆå§‹å®¹é‡çš„æ„é€ å‡½æ•°
    public MyArrayList(int initialCapacity) {
        if (initialCapacity < 0) {
            throw new IllegalArgumentException("Illegal Capacity: " + initialCapacity);
        }
        this.elementData = new Object[initialCapacity];
    }

    // æ·»åŠ å…ƒç´ åˆ°åˆ—è¡¨æœ«å°¾
    public boolean add(E e) {
        ensureCapacityInternal(size + 1);
        elementData[size++] = e;
        return true;
    }

    // è·å–æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ 
    public E get(int index) {
        rangeCheck(index);
        return (E) elementData[index];
    }

    // åˆ é™¤æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ 
    public E remove(int index) {
        rangeCheck(index);
        E oldValue = (E) elementData[index];
        int numMoved = size - index - 1;
        if (numMoved > 0) {
            System.arraycopy(elementData, index + 1, elementData, index, numMoved);
        }
        elementData[--size] = null; // å¸®åŠ©åƒåœ¾å›æ”¶
        return oldValue;
    }

    // è·å–åˆ—è¡¨çš„å…ƒç´ æ•°é‡
    public int size() {
        return size;
    }

    // æ£€æŸ¥ç´¢å¼•æ˜¯å¦è¶Šç•Œ
    private void rangeCheck(int index) {
        if (index >= size) {
            throw new IndexOutOfBoundsException("Index: " + index + ", Size: " + size);
        }
    }

    // ç¡®ä¿å†…éƒ¨å®¹é‡è¶³å¤Ÿ
    private void ensureCapacityInternal(int minCapacity) {
        if (minCapacity > elementData.length) {
            grow(minCapacity);
        }
    }

    // æ‰©å®¹æ“ä½œ
    private void grow(int minCapacity) {
        int oldCapacity = elementData.length;
        int newCapacity = oldCapacity + (oldCapacity >> 1);
        if (newCapacity - minCapacity < 0) {
            newCapacity = minCapacity;
        }
        elementData = Arrays.copyOf(elementData, newCapacity);
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("[");
        for (int i = 0; i < size; i++) {
            sb.append(elementData[i]);
            if (i < size - 1) {
                sb.append(", ");
            }
        }
        sb.append("]");
        return sb.toString();
    }
}

// æµ‹è¯•ç±»
public class Main {
    public static void main(String[] args) {
        MyArrayList<Integer> list = new MyArrayList<>();
        list.add(1);
        list.add(2);
        list.add(3);
        System.out.println("List: " + list);
        System.out.println("Element at index 1: " + list.get(1));
        list.remove(1);
        System.out.println("List after removing index 1: " + list);
    }
}    
```

## 3. LinkedList

åŸºäºåŒå‘é“¾è¡¨å®ç°çš„

ç‰¹ç‚¹ï¼š

1. åŒå‘é“¾è¡¨ï¼š

+ LinkedList ç”±èŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼šå…ƒç´ å€¼ï¼ˆæ•°æ®ï¼‰ã€æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆprevï¼‰å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆnextï¼‰ã€‚

+ å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹åˆ†åˆ«æŒ‡å‘ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ï¼Œç©ºé“¾è¡¨æ—¶ï¼Œå¤´å’Œå°¾æŒ‡é’ˆå‡ä¸ºç©ºã€‚

2. åŠ¨æ€å¤§å°ï¼š

+ LinkedList çš„å¤§å°æ˜¯åŠ¨æ€è°ƒæ•´çš„ï¼Œæ·»åŠ æˆ–åˆ é™¤å…ƒç´ ä¸éœ€è¦åƒæ•°ç»„é‚£æ ·æ‰©å®¹æˆ–ç¼©å®¹ï¼Œæ‰€ä»¥åœ¨é¢‘ç¹è¿›è¡Œæ’å…¥æˆ–åˆ é™¤æ“ä½œæ—¶ï¼Œå®ƒæ¯” ArrayList æ›´åŠ é«˜æ•ˆã€‚

3. æ’å…¥å’Œåˆ é™¤æ•ˆç‡ï¼š

+ åœ¨é“¾è¡¨ä¸­æ’å…¥æˆ–åˆ é™¤å…ƒç´ æ—¶ï¼Œåªéœ€æ›´æ”¹ç›¸é‚»èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå› æ­¤å®ƒçš„æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œåªè¦ä½ èƒ½ç›´æ¥è®¿é—®åˆ°è¯¥ä½ç½®ã€‚

+ ç„¶è€Œï¼ŒæŸ¥æ‰¾æŸä¸ªå…ƒç´ æ—¶ï¼ŒLinkedList éœ€è¦ä»å¤´æˆ–å°¾éå†é“¾è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚

4. éšæœºè®¿é—®æ€§èƒ½å·®ï¼š

+ LinkedList ä¸æ”¯æŒå¿«é€Ÿçš„éšæœºè®¿é—®ã€‚è¦è®¿é—®æŸä¸ªä½ç½®çš„å…ƒç´ ï¼Œéœ€è¦ä»å¤´èŠ‚ç‚¹æˆ–å°¾èŠ‚ç‚¹å¼€å§‹éå†ï¼Œå› æ­¤è®¿é—®æŸä¸ªå…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚

å¸¸è§æ–¹æ³•ï¼š
+ æ·»åŠ å…ƒç´ ï¼š
    + add(E e)ï¼šå°†å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨æœ«å°¾ã€‚
    + addFirst(E e)ï¼šå°†å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨çš„å¼€å¤´ã€‚
    + addLast(E e)ï¼šå°†å…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨çš„æœ«å°¾ï¼ˆä¸ add ç›¸åŒï¼‰ã€‚

+ åˆ é™¤å…ƒç´ ï¼š
    + remove()ï¼šç§»é™¤å¹¶è¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
    + removeFirst()ï¼šç§»é™¤å¹¶è¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
    + removeLast()ï¼šç§»é™¤å¹¶è¿”å›åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚

+ è·å–å…ƒç´ ï¼š
    + get(int index)ï¼šè¿”å›æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚
    + getFirst()ï¼šè¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚
    + getLast()ï¼šè¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚

+ å…¶å®ƒæ“ä½œï¼š
    + clear()ï¼šç§»é™¤æ‰€æœ‰å…ƒç´ ã€‚
    + size()ï¼šè¿”å›é“¾è¡¨ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚
    + contains(Object o)ï¼šæ£€æŸ¥é“¾è¡¨ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šçš„å…ƒç´ ã€‚












