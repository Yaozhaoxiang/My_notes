
1. 分配给套接字IP和端口号
  IP（internet protocol 网络协议）：是为收发网络数据而分配给计算机的值
  端口号：并非赋予计算机的值，而是为区分程序中创建的套接字而分配给套接字的序号

IPv4标准的4字节IP地址分为网络地址和主机地址，分为ABCEDE等类型。

网络地址（网络ID）是为了区分网络而设置的一部分IP地址。传输数据时是先根据IP地址的网络地址找到相应的网络，然后再找目标主机。由接收数据的路由器根据数据中的主句地址向目标地址传递数据。

路由器和交换机：
  若想构建网络，需要一种物理设备完成外网和本网主机之间的数据交换，这种设备便是路由器或交换机。他们实际上也是一种计算机，只不过是为特殊目的而设计运行的，因此有了别名。

通过IP地址的第一个字节即可判断网络地址占用的字节数，因为我们根据IP地址的边界区分网络地址：
  A:0-127
  B:128-191
  C:192-223

IP用于区分计算机，只要有IP地址就能向目标主机传输数据，但仅凭这些无法传输给最终的应用程序。
计算机中配有NIC（网络接口）数据传输设备。通过NIC向计算机内部传输数据时会用到IP。操作系统负责把传递到内部的数据适当分配给套接字，这时就要利用端口。也就是说，通过NIC接受的数据内有端口号，操作系统根据端口号把数据传递给相应端口的套接字。

端口号就是再同一操作系统内区分不同套接字而设置的，因此无法将1个端口号分配给不同套接字。


# 习题
1. IP地址族IPv4和IPv6有何区别？在何种背景下诞生了IPv6?
   IPv4：使用 32 位地址，地址长度为 4 字节（例如：192.168.0.1）。IPv4 地址的总数为约 43 亿（2^32），这在互联网初期已被认为是足够的。
   IPv6：使用 128 位地址，地址长度为 16 字节（例如：2001:0db8:85a3:0000:0000:8a2e:0370:7334）。IPv6 地址的总数为约 3.4×10^38（2^128），提供了几乎无限的地址空间。
   IPv6 是为了应对 IPv4 的不足而设计的，提供了更大的地址空间、更高效的网络操作和改进的协议功能。

2. 通过IPv4网络ID、主机ID及路由器的关系说明向公司局域网中的计算机传输数据的过程
   
   首先，发送计算机需要知道目标计算机的 IP 地址。假设发送计算机的 IP 地址是 192.168.1.5，目标计算机的 IP 地址是 192.168.1.10，并且两者都在同一个子网 192.168.1.0/24 内。

  发送计算机封装数据为 IP 数据包。数据包包括：
  源 IP 地址：192.168.1.5
  目标 IP 地址：192.168.1.10
  
  在局域网（LAN）中，数据包需要通过以太网进行传输。因此，发送计算机需要将目标 IP 地址转换为  目标计算机的 MAC 地址。这是通过 ARP（地址解析协议）完成的：
    ARP 请求：发送计算机发送一个 ARP 请求，询问“IP 地址为 192.168.1.10 的计算机的 MAC 地  址是什么？”
    ARP 响应：目标计算机收到 ARP 请求后，返回其 MAC 地址给发送计算机。
  
  发送计算机将数据包封装为以太网帧，并将目标 MAC 地址填入帧头部。数据包通过网络交换机或集线  器传输，最终到达目标计算机。
  
  目标计算机收到数据包后，检查 IP 头部以确认数据包的目标 IP 地址是自己的地址，然后将数据包  传递到相应的上层协议（如 TCP 或 UDP），最终交给应用程序处理。
  
  如果目标计算机不在同一个子网，例如发送计算机在 192.168.1.0/24 子网，而目标计算机在 192.  168.2.0/24 子网，则需要通过路由器：
    发送计算机会将数据包发送到默认网关（即路由器），路由器负责将数据包转发到正确的子网。
    通过路由器：发送计算机将数据包封装为以太网帧，并将目标 MAC 地址设置为路由器的 MAC 地  址。数据包通过路由器转发到目标子网。
    路由器处理：路由器检查目标 IP 地址，并将数据包转发到目标子网中的相应计算机。

3. 套接字地址分为IP地址和端口号。为什么需要IP地址和端口号？或者是，通过IP可以区分哪些对象？通过端口号可以区分哪些对象

  IP 地址是用来唯一标识网络上的设备（计算机、服务器、路由器等）。每个设备在网络上必须有一个唯一的 IP 地址，以确保数据包能够到达正确的目的地。
  当数据包从一个网络发送到另一个网络时，IP 地址用于路由和转发。路由器使用 IP 地址来决定数据包的最佳路径，并将其转发到目的地。

  端口号是用来在同一台设备上的不同应用程序或服务之间区分不同的数据流。它位于传输层（第四层）协议中，允许多个应用程序或服务在同一 IP 地址上运行而不会相互干扰。
  一个 IP 地址可以同时支持多个服务或应用程序。端口号使得网络应用能够共享同一个 IP 地址，通过不同的端口号来分发流量。

4. 说明IP地址的分类方法，并据此说出下面这些IP地址的分类。
   214.121.212.102 c
   120.101.122.89 a
   129.78.102.211 b
5. 计算机通过路由器或者交换机连接到互联网。请说出路由器和交换机的作用
  
  路由器用于连接不同的网络。它可以将家庭网络连接到互联网，也可以将不同的公司网络或子网连接起来。路由器根据目标 IP 地址决定数据包的最佳路径，并将数据包从一个网络转发到另一个网络。它使用路由表来决定数据包的转发路径。

  交换机用于在同一网络或局域网（LAN）内连接多个设备，并根据 MAC 地址将数据帧转发到正确的设备。它实现了设备之间的有效通信。

6. 什么是知名端口？其范围是多少？知名端口中具有代表性的HTTP和FTP端口号各是多少？

  知名端口（Well-Known Ports）是指在计算机网络中预定义的、被广泛使用的端口号范围,端口号的范围是从 0 到 1023。
  HTTP（超文本传输协议）：端口号：80
  HTTP 是一种用于传输网页的协议。Web 服务器通常监听端口 80，以便接收和处理来自客户端（如浏览器）的请求。

  FTP（文件传输协议）:端口号：21
  FTP 是一种用于在网络上进行文件传输的协议。FTP 服务器通常监听端口 21，以接收和处理来自客户端的文件传输请求。

7. 请解释大端序、小端序、网络字节序，并说明为何需要网络字节序

  在大端序中，多字节数据的高位字节存储在低地址处，低位字节存储在高地址处。
  在小端序中，多字节数据的低位字节存储在低地址处，高位字节存储在高地址处。
  网络字节序是一种标准的字节顺序，用于网络协议中数据的传输。网络字节序采用大端序（Big-Endian），即高位字节存储在低地址处，低位字节存储在高地址处。确保跨不同计算机系统的一致性。

  为什么需要网络字节序?
  跨平台一致性：计算机系统可能使用不同的字节序（大端序或小端序）。如果数据在网络上以系统本地的字节序进行传输，则不同平台之间的系统可能会出现解释错误。因此，采用统一的字节序（网络字节序）可以确保所有设备正确解释数据。


8. 大端序计算机希望把4字节整数型数据12传递到小端序计算机。请说明数据传输过程中发生的字节序变换过程

  1. 数据准备：大端序计算机在内存中存储的数据是大端序的格式。为了通过网络传输，数据需要以网络字节序的格式发送。在这个例子中，数据 0x0000000C 本身已经是大端序，因此网络字节序和大端序是一致的。
  2. 由于大端序计算机的数据已经是大端序的，所以不需要额外的转换。这意味着数据在网络传输前保持原样。
  3. 数据传输：数据通过网络传输到小端序计算机。这一步中，数据在网络上保持网络字节序，即大端序。
  4. 数据接收：小端序计算机接收到数据，数据在小端序计算机的内存中被解释为小端序。此时，大端序计算机发送的 0x0000000C 在小端序计算机中的内存表示为：0c 00 00 00
  5. 数据转换（网络字节序到主机字节序）：小端序计算机需要将接收到的数据从网络字节序（大端序）转换为本机的字节序（小端序）。这通常是**自动完成**的，操作系统和网络库会处理这一转换过程。

9.  怎样表示回送地址？其含义是什么？如果向回送地址传输数据将发生什么情况？
  
  1. 表示回送地址
  回送地址：127.0.0.1（IPv4）和 ::1（IPv6）。

  回送地址（Loopback Address）是一个特殊的 IP 地址，用于测试网络应用程序和服务的内部通信。无论在什么网络环境中，回送地址都是指向本地计算机自身的地址。

  2. 含义
  本地测试：回送地址用于测试计算机上的网络应用程序是否正常运行，不涉及网络中的其他设备。它可以检查本地服务是否可以正确处理和响应请求。

  本地通信：使用回送地址的通信不会通过物理网络接口进行，而是在计算机的内部网络栈中完成。它通常用于测试和调试本地网络应用程序，而不需要实际的网络连接。

  3.  向回送地址传输数据的情况
   数据的目的地：数据会被发送到本地计算机的网络栈，不会被发送到物理网络接口。这意味着数据传输是在计算机内部完成的，不会涉及外部网络。
   在发送端：数据包被发送到回送接口，由操作系统的网络堆栈处理。
   在接收端：数据包会被立即接收并处理。回送地址的通信被设计为无延迟的，因此数据包可以快速回到发送应用程序，模拟真实的网络通信情况。
  