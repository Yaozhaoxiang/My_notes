# 习题
## 1. 解释TCP中"流"的概念。UDP中能否形成流？请说明原因
1. 流的定义
   在 TCP（传输控制协议）中，“流”指的是一系列有序、连续的数据字节流。TCP 是面向连接的协议，它为数据提供了可靠的、有序的传输。TCP 将应用层的数据拆分成适当大小的段，并通过网络可靠地传输这些段。接收方按照发送顺序重组这些段，确保数据完整性和顺序性。

UDP 中的“流”
  UDP（用户数据报协议）是一个无连接的协议，不提供像 TCP 那样的流控制和保证机制。因此，UDP 中并不形成真正的“流”：
  UDP 不保证数据包的顺序。接收方可能会收到顺序不一致的数据包。
  UDP 不具有流控制机制，发送方可以以任何速度发送数据，而接收方可能来不及处理。
  UDP 是无连接的，不建立持久的连接，因此无法像 TCP 那样保持数据流的连续性和顺序。

TCP 中的流：TCP 提供了可靠、有序的数据流传输，自动处理数据的顺序、完整性和流控制。
UDP 中的流：UDP 不提供流的特性，没有内建的有序性、可靠性或流控制。尽管可以在应用层模拟流的行为，但这不是 UDP 协议本身提供的功能。

## 2. Linux中的close函数或者windows中的closesocket函数属于单方面断开连接的方法，有可能带来一些问题。什么是单方面断开连接？什么情况下会出现问题？

单方面断开连接的定义
  单方面断开连接：指的是连接的一方主动调用 close（在 Linux 中）或 closesocket（在 Windows 中）来关闭连接的过程。这意味着该方停止了数据发送，并释放了相关资源，但另一方可能仍然在试图发送或接收数据。

单方面断开连接的潜在问题
  1.数据丢失
  问题：如果一方主动关闭连接，而另一方尚未接收完所有数据或尚未完全处理数据，那么已经发送但尚未接收的数据可能会丢失。
  2.半关闭连接（半关闭状态）
  当一方调用 close 关闭连接的发送端（例如调用 shutdown(socket, SHUT_WR)），这会导致另一方知道发送端已经关闭，但接收端仍然可以继续接收数据。这种状态可能会让接收方在尝试读取数据时发现连接已经被关闭，从而产生错误或异常处理。
  3.连接重置
  问题：如果一方关闭连接而另一方仍在尝试与其通信，那么另一方可能会接收到连接重置（RST）包。处理这种异常可能会导致应用程序错误或崩溃。
  4.资源泄漏
  问题：如果一方在关闭连接时未能正确释放资源，可能会导致资源泄漏。例如，打开的文件描述符或套接字句柄未被释放。


## 3. 什么是半关闭？针对输出流执行半关闭的主机处于何种状态？半关闭会导致对方主机接收什么消息？

半关闭定义：
  半关闭（也称为部分关闭）是指在一个双向连接中，一方关闭了自己的发送端（不能再发送数据），但仍然保持接收端打开（可以继续接收数据）。这个状态意味着对方可能仍会接收到数据，但发送方已经完成了数据发送。

半关闭的主机状态：
  关闭发送端：调用 shutdown(socket, SHUT_WR) 或者在 TCP 中调用 close 关闭了发送端。此时，主机将进入一个状态，无法再发送数据。
  保持接收端开放：即使发送端被关闭，该主机仍可以接收来自对方的数据。主机的接收缓冲区仍然有效，并且会接收对方发送的数据，直到对方也关闭连接。

半关闭对对方主机的影响     
  1. 对方主机的接收：
    当一方执行半关闭操作时，对方主机会检测到连接的一部分被关闭。具体来说，对方主机会收到一个特殊的标志，通常表现为接收到一个 TCP FIN（结束）包。这个包表示发送端已经完成了所有的数据传输，不会再发送更多的数据。
    对方主机的应用程序会收到相应的通知，通常在应用程序的读操作中，遇到 EOF（文件结束）指示符，表明发送端已经关闭
  2. 收到的消息：
    对方主机在接收到半关闭的一方发来的 FIN 包后，会继续读取数据直到对方关闭发送端。此时，如果对方主机继续尝试写数据到已半关闭的连接，通常会发现写操作失败，并可能收到一个错误（例如 ECONNRESET）。


