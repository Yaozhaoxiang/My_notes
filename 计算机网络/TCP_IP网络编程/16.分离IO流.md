这一章主要讲的是：基于fdopen函数的分流；
调用fclose都将关闭文件描述符，也就是终止套接字，
所以为了避免这种情况，首页我们复制一个文件描述符，分配给FILE指针，这样调用fclose时，只关闭自己的文件描述符，并不会关闭套接字，因为这时还有另一个文件描述符指向套接字
虽然关闭了一个文件描述符，但是此时没有关闭缓冲，所以还需要调用shutdown函数；

# 习题
## 1. 下列关于FILE结构体指针和文件描述符的说法错误的是？
1. 与FILE结构体指针相同，文件描述符也分为输入描述符和输出描述符
    错误：文件描述符并不严格区分为输入或输出描述符。文件描述符是对已打开文件的引用，可以根据文件的打开模式（如读、写、读写）进行相应的 I/O 操作

2. 复制文件描述符时将生成相同值的描述符，可以通过这2个描述符进行IO
    错误：复制文件描述符时使用 dup 或 dup2，它们生成的文件描述符具有相同的值，这个说法不准确。复制的文件描述符会具有不同的值，但指向相同的文件表项，因此可以通过它们进行 I/O 操作。

3. 可以利用创建套接字时返回的文件描述符进行IO，也可以不通过文件描述符，直接通过FILE结构体指针完成
    套接字可以使用文件描述符进行 I/O 操作，确实可以通过 fdopen 将文件描述符转换为 FILE 结构体指针并通过标准 I/O 函数进行操作。不过 "也可以不通过文件描述符" 这个描述是不准确的，所有操作最终都依赖文件描述符。

4. 可以从文件描述符生成FIET结构体指针，而且可以利用这种FIEL结构体指针进行套接字IO
    通过 fdopen 可以将文件描述符转换为 FILE 结构体指针，确实可以进行套接字 I/O，这个说法是正确的。

5. 若文件描述符为读模式，则基于该描述符生成的FIET结构体指针同样是读模式；若文件描述符为写模式，则基于该描述符生成的FIET结构体指针同样是写模式
    正确。如果通过 fdopen 将文件描述符转换为 FILE 指针时，应该确保模式匹配，否则会导致未定义行为。

## 2.EOF的发送相关描述中错误的是
1. 终止文件描述符时发送EOF
    一般来说，文件描述符的终止（即关闭）会在流的末尾发送 EOF（文件结束符），表示数据的传输结束。这个说法通常是正确的。

2. 即使未完成终止文件描述符，关闭输出流时也会发送EOF   
    在关闭输出流时，操作系统通常会将输出缓冲区中的数据刷新并发送完毕，但关闭输出流并不等同于发送 EOF。EOF 通常是文件描述符完全关闭时才发送。这个描述有一定的问题，因为关闭输出流不一定会发送 EOF。

3. 如果复制文件描述符，则包括复制的文件描述符在内，所有描述符都终止时才会发送EOF
    文件描述符的复制不会影响 EOF 的发送，除非所有指向同一文件表项的文件描述符都被关闭时，才会发送 EOF。所以这句话是正确的。

4. 即使复制文件描述符，也可以通过调用shutdown函数进入半关闭状态并发送EOF
    对于套接字，shutdown 函数允许关闭单向的通信通道（即半关闭），这可以导致发送 EOF。因此这个说法是正确的。






