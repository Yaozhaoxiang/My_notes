1. 定义
内存屏障（Memory Barrier）也称为内存栅栏（Memory Fence），是一种硬件或软件层面的机制。它用于控制处理器对内存操作的顺序，确保在屏障之前的内存操作一定会在屏障之后的内存操作之前完成，从而保证了内存操作的顺序性和可见性。

2. 作用原理
在现代计算机体系结构中，为了提高性能，处理器和编译器可能会对指令进行重排序。例如，处理器可能会在不影响单线程程序正确性的前提下，将内存写操作推迟，或者将内存读操作提前。但是在多线程环境下，这种重排序可能会导致程序出现错误。

内存屏障就是用来阻止这种不恰当的重排序。当程序执行到一个内存屏障指令时，它会确保在屏障之前的所有内存访问操作（如加载和存储）都已经完成，并且对其他处理器可见，然后才会执行屏障之后的内存访问操作。

3. 类型

+ 写内存屏障（Store Memory Barrier）
    + 写内存屏障确保在它之前的所有写操作都在它之后的写操作之前完成。例如，在多处理器系统中，如果线程 A 执行了一些写操作，然后设置了一个写内存屏障，接着又执行其他写操作，那么其他处理器会看到在屏障之前的写操作先于屏障之后的写操作发生。
+ 读内存屏障（Load Memory Barrier）
    + 读内存屏障保证在它之前的所有读操作都在它之后的读操作之前完成。这可以防止处理器提前读取后面的数据，从而保证数据的读取顺序符合程序的预期。
+ 全内存屏障（Full Memory Barrier）
    + 全内存屏障兼具写内存屏障和读内存屏障的功能。它确保在屏障之前的所有读写操作都在屏障之后的读写操作之前完成。这种屏障提供了最强的顺序保证。

4. 



