C 语言的编译过程主要分为四个阶段，分别是预处理、编译、汇编和链接，以下是详细介绍：

1. 预处理（Preprocessing）

任务：处理以#开头的预处理指令，像是#include、#define、#ifdef等。例如，#include <stdio.h>会让预处理器把标准输入输出库的头文件内容直接插入到源文件对应的位置；#define 宏定义会在代码中进行文本替换。此外，条件编译指令（如#ifdef、#ifndef 、#endif ）会依据宏定义是否存在，来决定某些代码段是否参与后续编译。

工具：在 GCC 编译器中，使用-E选项可以只进行预处理并输出结果，生成的文件通常是.i后缀。例如，gcc -E main.c -o main.i ，main.i文件包含经过预处理后的代码。

2. 编译（Compilation）

任务：将预处理后的代码（.i文件）翻译成汇编语言代码。编译器会对源程序进行词法分析、语法分析和语义分析，把 C 语言代码转换为对应目标机器的汇编指令。例如，把int a = 10;这样的 C 语句，根据目标机器的指令集特性，转化成对应的加载、存储等汇编操作。

工具：GCC 中，使用-S选项可以只进行编译，生成的文件是.s后缀的汇编文件，如gcc -S main.i -o main.s 。

3. 汇编（Assembly）

任务：把汇编语言代码（.s文件）转换为机器码，也就是目标文件。汇编器会把汇编指令一对一地映射成机器能识别的二进制指令，每个汇编指令对应一组特定的机器码，这些机器码以二进制形式存放在目标文件中。

工具：GCC 里，用-c选项可以只进行汇编操作，生成的目标文件后缀为.o，例如gcc -c main.s -o main.o 。

4. 链接（Linking）

任务：链接器把多个目标文件（.o文件）以及可能用到的库文件组合起来，生成最终的可执行文件。这是因为一个稍复杂的程序往往会被拆分成多个模块分别编译，这些模块间可能相互调用函数或者共享变量，链接器负责处理这些跨模块的引用关系，确保程序的整体性；它还会将程序所依赖的库函数链接进来，像printf函数就来自标准 C 库，需要在这个阶段整合到最终可执行文件里。

工具：在 GCC 中，直接使用gcc命令，不带-E、-S、-c这类限制选项，后面跟上要编译链接的目标文件，就会执行完整的链接过程，生成最终的可执行文件，例如gcc main.o -o main ，main就是最终的可执行程序。